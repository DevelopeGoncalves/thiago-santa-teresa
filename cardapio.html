<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thiago Santa Teresa - Card√°pio Digital</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --terracota: #e4593c;
            --red-brown: #a93131;
            --dark: #1a1a1a;
            --light: #fff;
            --success: #10b981;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1f1f 100%);
            color: var(--light);
            overflow-x: hidden;
            padding-bottom: 100px;
        }

        /* Toast Notification */
        .toast {
            position: fixed; top: 20px; right: 20px;
            background: white; color: var(--dark);
            padding: 15px 25px; border-radius: 10px;
            border-left: 5px solid var(--terracota);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 9999; transform: translateX(200%); transition: transform 0.3s ease;
        }
        .toast.show { transform: translateX(0); }

        /* Header Animado */
        .header {
            background: linear-gradient(135deg, var(--terracota) 0%, var(--red-brown) 100%);
            padding: 2rem; text-align: center; position: relative;
            box-shadow: 0 10px 40px rgba(228, 89, 60, 0.3);
        }
        .header h1 { font-size: 2.5rem; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .header p { font-size: 1.1rem; opacity: 0.95; }
        .mesa-info {
            background: rgba(0,0,0,0.2); display: inline-block;
            padding: 5px 15px; border-radius: 20px; margin-top: 10px; font-weight: bold;
            border: 1px solid rgba(255,255,255,0.3);
        }

        /* Busca e Tabs */
        .search-container { max-width: 600px; margin: -25px auto 30px; padding: 0 20px; position: relative; z-index: 10; }
        .search-box {
            width: 100%; padding: 15px 20px; border: none; border-radius: 50px;
            font-size: 1rem; background: rgba(255, 255, 255, 0.95); color: var(--dark);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .tabs { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; padding: 0 20px; max-width: 1200px; margin: 0 auto 30px; }
        .tab {
            padding: 10px 20px; background: rgba(255, 255, 255, 0.1); border: 1px solid transparent;
            border-radius: 30px; cursor: pointer; transition: all 0.3s; color: #ddd;
        }
        .tab.active { background: var(--terracota); color: white; border-color: var(--terracota); }

        /* Grid */
        .menu-container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }

        /* Card */
        .product-card {
            background: rgba(255, 255, 255, 0.05); border-radius: 15px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1); transition: transform 0.3s;
            display: flex; flex-direction: column;
        }
        .product-image {
            height: 180px; background: #2d2d2d; display: flex; align-items: center; justify-content: center;
            font-size: 3rem; overflow: hidden; position: relative;
        }
        .product-image img { width: 100%; height: 100%; object-fit: cover; }
        .product-info { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-name { font-size: 1.2rem; font-weight: bold; margin-bottom: 5px; }
        .product-badges { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; }
        .badge { padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: bold; }
        .badge-alcool { background: #ef4444; color: white; }
        .badge-sem-alcool { background: #10b981; color: white; }
        .product-price { font-size: 1.5rem; font-weight: bold; color: var(--terracota); margin-bottom: 10px; }

        /* Inputs do Card */
        .obs-input {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #444; color: white;
            padding: 8px; border-radius: 8px; margin-bottom: 10px; font-size: 0.9rem;
            resize: none;
        }
        .option-controls select {
            width: 100%; padding: 8px; margin-bottom: 10px; background: #333; color: white;
            border: 1px solid #555; border-radius: 8px;
        }
        .add-btn {
            width: 100%; padding: 12px; background: var(--terracota); border: none; border-radius: 8px;
            color: white; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .add-btn:active { transform: scale(0.98); }

        /* Floating Buttons */
        .float-actions { position: fixed; bottom: 30px; right: 30px; display: flex; flex-direction: column; gap: 15px; z-index: 1000; }
        .float-btn {
            width: 60px; height: 60px; border-radius: 50%; border: none; color: white;
            font-size: 1.5rem; cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            display: flex; align-items: center; justify-content: center; position: relative;
            transition: transform 0.3s;
        }
        .btn-cart { background: var(--terracota); }
        .btn-waiter { background: #333; border: 2px solid var(--terracota); }
        .btn-orders { background: #0ea5e9; }
        .float-btn:hover { transform: scale(1.1); }
        .cart-count {
            position: absolute; top: -5px; right: -5px; background: white; color: var(--terracota);
            width: 25px; height: 25px; border-radius: 50%; font-size: 0.8rem; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
        }

        /* Modais */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 2000; align-items: center; justify-content: center;
            padding: 20px;
        }
        .modal.active { display: flex; animation: fadeIn 0.3s; }
        .modal-content {
            background: #2d2d2d; width: 100%; max-width: 500px; padding: 30px;
            border-radius: 20px; border: 1px solid #444; position: relative;
            max-height: 85vh; overflow-y: auto;
        }
        .close-btn { position: absolute; top: 15px; right: 15px; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        
        .cart-item {
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;
            margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;
        }
        .cart-obs { font-size: 0.8rem; color: #aaa; margin-top: 5px; font-style: italic; }
        
        .order-status-card {
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;
            margin-bottom: 15px; border-left: 4px solid #555;
        }
        .status-badge {
            display: inline-block; padding: 4px 10px; border-radius: 15px;
            font-size: 0.8rem; font-weight: bold; margin-top: 5px;
        }
        .st-pendente { background: #f59e0b; color: black; }
        .st-preparo { background: #3b82f6; color: white; }
        .st-pronto { background: #10b981; color: white; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="toast" class="toast">Item adicionado!</div>

    <div class="modal active" id="modalIdentificacao">
        <div class="modal-content" style="text-align: center;">
            <h2 style="color: var(--terracota); margin-bottom: 15px;">Bem-vindo!</h2>
            <p style="margin-bottom: 20px; color: #ccc;">Para iniciarmos seu atendimento, por favor identifique-se.</p>
            
            <label style="display:block; text-align:left; color:#888; margin-bottom:5px; font-size:0.9rem;">N√∫mero da Mesa (Ex: 5, 12)</label>
            <input type="number" id="inputNumMesa" placeholder="00" 
                   style="width: 100%; padding: 15px; border-radius: 10px; border: none; margin-bottom: 15px; text-align: center; font-size: 1.1rem; background:white; color:black;">
            
            <label style="display:block; text-align:left; color:#888; margin-bottom:5px; font-size:0.9rem;">Seu Nome (Opcional)</label>
            <input type="text" id="inputNomeCliente" placeholder="Como podemos te chamar?" 
                   style="width: 100%; padding: 15px; border-radius: 10px; border: none; margin-bottom: 25px; text-align: center; font-size: 1.1rem; background:white; color:black;">

            <button class="add-btn" onclick="salvarIdentificacao()">Confirmar e Abrir Card√°pio</button>
        </div>
    </div>

    <header class="header">
        <h1>üç∑ Thiago Santa Teresa</h1>
        <p>Restaurante & Bar</p>
        <div id="mesaDisplay" class="mesa-info" style="display: none;"></div>
    </header>

    <div class="search-container">
        <input type="text" class="search-box" id="searchInput" placeholder="O que voc√™ deseja comer ou beber hoje?">
    </div>

    <div class="tabs" id="tabs">
        <button class="tab active" data-category="bebidas">üç∫ Bebidas</button>
        <button class="tab" data-category="entradas">ü•ò Entradas</button>
        <button class="tab" data-category="pratos">üçñ Pratos</button>
        <button class="tab" data-category="cocktails">üç∏ Cocktails</button>
        <button class="tab" data-category="mocktails">ü•§ Mocktails</button>
        <button class="tab" data-category="vinhos">üç∑ Vinhos</button>
    </div>

    <div class="menu-container">
        <div class="menu-grid" id="menuGrid"></div>
    </div>

    <div class="float-actions">
        <button class="float-btn btn-orders" onclick="abrirMeusPedidos()" title="Meus Pedidos">
            üìã
        </button>
        <button class="float-btn btn-waiter" onclick="chamarGarcom()" title="Chamar Gar√ßom">
            üîî
        </button>
        <button class="float-btn btn-cart" onclick="abrirCarrinho()">
            üõí
            <span class="cart-count" id="cartCount">0</span>
        </button>
    </div>

    <div class="modal" id="cartModal">
        <div class="modal-content">
            <button class="close-btn" onclick="fecharModal('cartModal')">‚úï</button>
            <h2 style="color: var(--terracota); margin-bottom: 20px;">üõí Seu Pedido</h2>
            <div id="cartItems"></div>
            <div style="margin-top: 20px; border-top: 1px solid #444; padding-top: 15px; display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold;">
                <span>Total:</span>
                <span id="cartTotal">R$ 0,00</span>
            </div>
            <button class="add-btn" style="margin-top: 20px; font-size: 1.2rem;" onclick="finalizarPedido()">Enviar Pedido üöÄ</button>
        </div>
    </div>

    <div class="modal" id="ordersModal">
        <div class="modal-content">
            <button class="close-btn" onclick="fecharModal('ordersModal')">‚úï</button>
            <h2 style="color: #0ea5e9; margin-bottom: 20px;">üìã Acompanhamento</h2>
            <div id="ordersList"></div>
        </div>
    </div>

    <div class="modal" id="successModal">
        <div class="modal-content" style="text-align: center;">
            <h2 style="font-size: 3rem; margin-bottom: 10px;">‚úÖ</h2>
            <h3 style="color: var(--success); margin-bottom: 10px;">Pedido Enviado!</h3>
            <p style="color: #ccc;">A cozinha j√° recebeu seu pedido.</p>
            <button class="add-btn" onclick="window.location.reload()" style="margin-top: 20px;">Fazer Novo Pedido</button>
        </div>
    </div>

    <script>
        // --- DADOS (Mock) ---
        const cardapio = {
            bebidas: [
                { id: 1, nome: 'Cerveja Gelada', preco: 8.00, emoji: 'üç∫', categoria: 'bebidas', imagemUrl: 'https://images.unsplash.com/photo-1608270586620-248524c67de9?w=500' },
                { id: 2, nome: 'Refrigerante', preco: 6.00, emoji: 'ü•§', categoria: 'bebidas', imagemUrl: 'https://images.unsplash.com/photo-1622483767028-3f66f32aef97?w=500' },
                { id: 3, nome: '√Ågua com G√°s', preco: 4.00, emoji: 'üíß', categoria: 'bebidas', imagemUrl: 'https://images.unsplash.com/photo-1560697529-7236591c0066?w=500' },
                { id: 5, nome: 'Suco Natural', preco: 10.00, emoji: 'üßÉ', categoria: 'bebidas', imagemUrl: 'https://images.unsplash.com/photo-1613478223719-2ab802602423?w=500' },
            ],
            entradas: [
                { id: 6, nome: 'Torresmo Defumado', preco: 25.00, emoji: 'ü•ì', categoria: 'entradas', imagemUrl: 'https://images.unsplash.com/photo-1605909683542-a4423456860f?w=500' },
                { id: 8, nome: 'Franguinho', preco: 28.00, emoji: 'üçó', categoria: 'entradas', imagemUrl: 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=500' },
                { id: 12, nome: 'Coxinha de Costela', preco: 24.00, emoji: 'ü•ü', categoria: 'entradas', imagemUrl: 'https://images.unsplash.com/photo-1612182062633-9524ca86210f?w=500' },
            ],
            pratos: [
                { id: 13, nome: 'Feijoada Completa', preco: 45.00, emoji: 'üçõ', categoria: 'pratos', imagemUrl: 'https://images.unsplash.com/photo-1550450339-e7a479020492?w=500' },
                { id: 14, nome: 'Churrasco Premium', preco: 55.00, emoji: 'ü•©', categoria: 'pratos', imagemUrl: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=500' },
            ],
            cocktails: [
                { id: 16, nome: 'Caipirinha', preco: 18.00, emoji: 'üçã', alcool: true, categoria: 'cocktails', imagemUrl: 'https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=500' },
                { id: 23, nome: 'Moscow Mule', preco: 23.00, emoji: 'üç∫', alcool: true, categoria: 'cocktails', imagemUrl: 'https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=500' },
            ],
            mocktails: [
                { id: 25, nome: 'Ginger Ale', preco: 14.00, emoji: 'ü•§', alcool: false, categoria: 'mocktails', imagemUrl: 'https://images.unsplash.com/photo-1534353473418-4cfa6c56fd38?w=500' },
            ],
            vinhos: [
                { 
                    id: 28, nome: 'Vinho Tinto', emoji: 'üç∑', categoria: 'vinhos', imagemUrl: 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=500',
                    opcoes: [{ id: 28.1, nomeOpcao: 'Ta√ßa', preco: 18.00 }, { id: 28.2, nomeOpcao: 'Garrafa', preco: 85.00 }]
                },
            ],
        };

        // --- ESTADO ---
        let carrinho = [];
        let identificacaoMesa = localStorage.getItem('mesa_atual') || '';
        let allItems = [];

        // --- INICIALIZA√á√ÉO ---
        function init() {
            processarItens();
            renderMenu('bebidas');
            
            // Verifica se veio mesa na URL (QR Code) ex: cardapio.html?mesa=5
            const urlParams = new URLSearchParams(window.location.search);
            const mesaParam = urlParams.get('mesa');
            if(mesaParam) {
                // Formata automaticamente para "Mesa 0X"
                const num = parseInt(mesaParam);
                const mesaFormatada = `Mesa ${num < 10 ? '0'+num : num}`;
                identificacaoMesa = mesaFormatada;
                localStorage.setItem('mesa_atual', identificacaoMesa);
            }
            
            if (identificacaoMesa) {
                document.getElementById('modalIdentificacao').classList.remove('active');
                atualizarHeaderMesa();
            }

            document.getElementById('tabs').addEventListener('click', (e) => {
                if (e.target.classList.contains('tab')) {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    e.target.classList.add('active');
                    renderMenu(e.target.dataset.category);
                }
            });

            document.getElementById('searchInput').addEventListener('input', (e) => renderMenu(document.querySelector('.tab.active').dataset.category, e.target.value));
        }

        function processarItens() {
            for (const cat in cardapio) {
                cardapio[cat].forEach(item => {
                    if (item.opcoes) {
                        item.opcoes.forEach(opt => {
                            allItems.push({ ...item, id: opt.id, nome: `${item.nome} (${opt.nomeOpcao})`, preco: opt.preco, isOption: true, parentId: item.id });
                        });
                    } else {
                        allItems.push({ ...item });
                    }
                });
            }
        }

        // --- L√ìGICA DE INTERFACE ---
        function salvarIdentificacao() {
            const numMesa = document.getElementById('inputNumMesa').value.trim();
            const nomeCliente = document.getElementById('inputNomeCliente').value.trim();
            
            if (!numMesa && !nomeCliente) return showToast('Por favor, informe ao menos o n√∫mero da mesa.');
            
            // FORMATA√á√ÉO AUTOM√ÅTICA: "Mesa 05 - Jo√£o"
            let idFinal = '';
            
            if (numMesa) {
                const num = parseInt(numMesa);
                // Garante "Mesa 05" em vez de "Mesa 5" para combinar com o Mapa
                idFinal = `Mesa ${num < 10 ? '0'+num : num}`; 
            }
            
            if (nomeCliente) {
                if (idFinal) idFinal += ` - ${nomeCliente}`;
                else idFinal = nomeCliente;
            }

            identificacaoMesa = idFinal;
            localStorage.setItem('mesa_atual', identificacaoMesa);
            document.getElementById('modalIdentificacao').classList.remove('active');
            atualizarHeaderMesa();
        }

        function atualizarHeaderMesa() {
            const el = document.getElementById('mesaDisplay');
            el.textContent = `üìç ${identificacaoMesa}`;
            el.style.display = 'inline-block';
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function fecharModal(id) { document.getElementById(id).classList.remove('active'); }
        function abrirCarrinho() { document.getElementById('cartModal').classList.add('active'); atualizarCarrinho(); }
        
        function abrirMeusPedidos() {
            document.getElementById('ordersModal').classList.add('active');
            renderizarMeusPedidos();
        }

        function chamarGarcom() {
            if (confirm("Deseja chamar o gar√ßom para " + identificacaoMesa + "?")) {
                showToast('üîî Gar√ßom chamado! Aguarde um instante.');
            }
        }

        // --- RENDERIZA√á√ÉO ---
        function renderMenu(categoria, filtro = '') {
            const grid = document.getElementById('menuGrid');
            let lista = allItems;
            
            if (filtro) {
                lista = allItems.filter(i => i.nome.toLowerCase().includes(filtro.toLowerCase()));
            } else {
                const baseIds = new Set();
                lista = allItems.filter(i => {
                    if (i.categoria !== categoria) return false;
                    if (i.isOption) {
                         if (baseIds.has(i.parentId)) return false;
                         baseIds.add(i.parentId);
                         return true;
                    }
                    return true;
                });
            }

            grid.innerHTML = lista.map(item => {
                let itemRender = item;
                let htmlControles = '';
                
                if (item.isOption) {
                    const original = cardapio.vinhos.find(v => v.id === item.parentId);
                    itemRender = original; 
                    htmlControles = `
                        <div class="option-controls">
                            <select id="select-${original.id}">
                                ${original.opcoes.map(o => `<option value="${o.id}">${o.nomeOpcao} - R$ ${o.preco.toFixed(2)}</option>`).join('')}
                            </select>
                        </div>
                    `;
                }

                const uniqueId = itemRender.id;

                return `
                <div class="product-card">
                    <div class="product-image">
                        <img src="${itemRender.imagemUrl}" loading="lazy" alt="${itemRender.nome}">
                    </div>
                    <div class="product-info">
                        <div>
                            <h3 class="product-name">${itemRender.nome}</h3>
                            <div class="product-badges">
                                ${itemRender.alcool ? '<span class="badge badge-alcool">Alco√≥lico</span>' : ''}
                            </div>
                            <div class="product-price">${item.isOption ? 'A partir de ' : ''}R$ ${itemRender.preco ? itemRender.preco.toFixed(2) : itemRender.opcoes[0].preco.toFixed(2)}</div>
                            ${htmlControles}
                            <textarea id="obs-${uniqueId}" class="obs-input" rows="1" placeholder="Observa√ß√µes (ex: sem gelo)"></textarea>
                        </div>
                        <button class="add-btn" onclick="addClick(${uniqueId}, ${!!item.isOption})">‚ûï Adicionar</button>
                    </div>
                </div>`;
            }).join('');
        }

        // --- CARRINHO LOGIC ---
        function addClick(id, isOption) {
            let finalId = id;
            let preco = 0;
            let nome = '';

            if (isOption) {
                const select = document.getElementById(`select-${id}`);
                finalId = parseFloat(select.value);
                const itemFull = allItems.find(i => i.id === finalId);
                nome = itemFull.nome;
                preco = itemFull.preco;
            } else {
                const itemFull = allItems.find(i => i.id === id);
                nome = itemFull.nome;
                preco = itemFull.preco;
            }

            const obs = document.getElementById(`obs-${id}`).value;
            const existing = carrinho.find(i => i.id === finalId && i.obs === obs);
            
            if (existing) {
                existing.quantidade++;
            } else {
                const itemBase = allItems.find(i => i.id === finalId);
                carrinho.push({
                    id: finalId,
                    nome: nome,
                    preco: preco,
                    quantidade: 1,
                    obs: obs,
                    emoji: itemBase.emoji || 'üçΩÔ∏è',
                    categoria: itemBase.categoria
                });
            }
            
            document.getElementById(`obs-${id}`).value = '';
            showToast(`${nome} adicionado!`);
            atualizarContador();
        }

        function atualizarContador() {
            document.getElementById('cartCount').textContent = carrinho.reduce((acc, i) => acc + i.quantidade, 0);
        }

        function atualizarCarrinho() {
            const container = document.getElementById('cartItems');
            if (carrinho.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#888; padding:20px;">Seu carrinho est√° vazio.</p>';
                document.getElementById('cartTotal').textContent = 'R$ 0,00';
                return;
            }

            container.innerHTML = carrinho.map((item, idx) => `
                <div class="cart-item">
                    <div style="flex:1">
                        <div style="font-weight:bold;">${item.quantidade}x ${item.nome}</div>
                        <div style="color:var(--terracota);">R$ ${(item.preco * item.quantidade).toFixed(2)}</div>
                        ${item.obs ? `<div class="cart-obs">üìù ${item.obs}</div>` : ''}
                    </div>
                    <button onclick="removerItem(${idx})" style="background:none; border:1px solid #555; color:white; width:30px; height:30px; border-radius:50%; cursor:pointer;">-</button>
                </div>
            `).join('');

            const total = carrinho.reduce((acc, i) => acc + (i.preco * i.quantidade), 0);
            document.getElementById('cartTotal').textContent = `R$ ${total.toFixed(2)}`;
        }

        function removerItem(index) {
            carrinho.splice(index, 1);
            atualizarCarrinho();
            atualizarContador();
        }

        function finalizaPedido() {
             finalizarPedido();
        }

        function finalizarPedido() {
            if (carrinho.length === 0) return;
            if (!identificacaoMesa) return alert("Erro: Identifique sua mesa.");

            const total = carrinho.reduce((sum, item) => sum + (item.preco * item.quantidade), 0);
            
            const novoPedido = {
                id: Date.now(),
                data: new Date().toISOString(),
                nomeCliente: identificacaoMesa,
                itens: carrinho,
                total: total,
                status: 'Novo - WEB',
                origem: 'Web'
            };

            // Salva no localStorage (dispara evento para cozinha.html)
            const pendentes = JSON.parse(localStorage.getItem('pedidos_web_pendentes') || '[]');
            pendentes.push(novoPedido);
            localStorage.setItem('pedidos_web_pendentes', JSON.stringify(pendentes));

            // Salva hist√≥rico local
            const meusPedidos = JSON.parse(localStorage.getItem('meus_pedidos_local') || '[]');
            meusPedidos.push(novoPedido.id);
            localStorage.setItem('meus_pedidos_local', JSON.stringify(meusPedidos));

            carrinho = [];
            atualizarContador();
            document.getElementById('cartModal').classList.remove('active');
            document.getElementById('successModal').classList.add('active');
        }

        // --- MEUS PEDIDOS ---
        function renderizarMeusPedidos() {
            const meusIds = JSON.parse(localStorage.getItem('meus_pedidos_local') || '[]');
            const container = document.getElementById('ordersList');
            
            if (meusIds.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#888;">Voc√™ ainda n√£o fez pedidos.</p>';
                return;
            }

            const webPendentes = JSON.parse(localStorage.getItem('pedidos_web_pendentes') || '[]');
            const cozinhaPedidos = JSON.parse(localStorage.getItem('pedidos') || '[]');
            
            const historico = meusIds.map(id => {
                let pedido = webPendentes.find(p => p.id === id);
                let status = 'Aguardando Confirma√ß√£o';
                let classe = 'st-pendente';

                if (!pedido) {
                    pedido = cozinhaPedidos.find(p => p.id === id);
                    if (pedido) {
                        if (pedido.status === 'Pendente') { status = 'Na Fila de Preparo'; classe = 'st-pendente'; }
                        else if (pedido.status === 'Em Preparo') { status = 'Sendo Preparado üî•'; classe = 'st-preparo'; }
                        else if (pedido.status === 'Pronto') { status = 'Pronto para Servir ‚úÖ'; classe = 'st-pronto'; }
                        else if (pedido.status === 'Vendido') { status = 'Conclu√≠do'; classe = 'st-pronto'; }
                    } else {
                        status = 'Finalizado/Arquivado';
                        classe = 'st-pronto';
                        pedido = { total: 0, itens: [] }; 
                    }
                }

                return `
                    <div class="order-status-card">
                        <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                            <span style="font-weight:bold;">Pedido #${String(id).slice(-4)}</span>
                            <span>${new Date(pedido.data || Date.now()).toLocaleTimeString().slice(0,5)}</span>
                        </div>
                        <div style="font-size:0.9rem; color:#ccc;">
                            ${pedido.itens ? pedido.itens.map(i => `${i.quantidade}x ${i.nome}`).join(', ') : 'Itens...'}
                        </div>
                        <span class="status-badge ${classe}">${status}</span>
                    </div>
                `;
            }).reverse().join('');

            container.innerHTML = historico;
        }

        init();
    </script>
</body>
</html>
